!function(){"use strict";function v(a){var t=a.h/360,r=a.s/100,n=a.l/100,e=0,h=0,o=0;if(0==r)o=h=e=function(a){var t=a*c;return t=Math.round(t),t=Math.max(0,t),t=Math.min(255,t)}(n);else{var d=[],i=.5<=n?n+r-n*r:n*(1+r),u=2*n-i;d[0]=t+1/3,d[1]=t,d[2]=t-1/3;for(var f=0;f<d.length;f++){var s=d[f];switch(s<0?s+=1:1<s&&(s-=1),!0){case s<1/6:s=u+6*(i-u)*s;break;case 1/6<=s&&s<.5:s=i;break;case.5<=s&&s<2/3:s=u+(i-u)*(4-6*s);break;default:s=u}d[f]=Math.round(s*c)}e=d[0],h=d[1],o=d[2]}return{r:e,g:h,b:o}}function M(a){return 100*a/c}var l=function(){return(l=Object.assign||function(a){for(var t,r=1,n=arguments.length;r<n;r++)for(var e in t=arguments[r])Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e]);return a}).apply(this,arguments)},c=255;function m(a){return-100<=a&&a<=100}function b(a,t){var r=a.r,n=a.g,e=a.b,h=M(r),o=M(n),d=M(e),i=Math.min(h,o,d),u=Math.max(h,o,d),f=u-i,s=0,c=0,g=(u+i)/2;return u===i?c=s=0:(u===h&&d<=o?s=(o-d)/f*60+0:u===h&&o<d?s=(o-d)/f*60+360:u===o?s=(d-h)/f*60+120:u===d&&(s=(h-o)/f*60+240),0===g||u===i?c=0:0<g&&g<=127.5?c=f/(u+i):127.5<g&&(c=f/(510-(u+i)))),s=Math.round(s),c=Math.round(100*c),g=Math.round(g),t&&(m(t.h)&&(s=Math.floor(s*(100+t.h)/100),s=Math.min(360,s),s=Math.max(0,s)),m(t.s)&&(c=Math.floor(c*(100+t.s)/100),c=Math.min(100,c),c=Math.max(0,c)),m(t.l)&&(g=Math.floor(g*(100+t.l)/100),g=Math.min(100,g),g=Math.max(0,g))),{h:s,s:c,l:g}}var n=function(a,t){for(var r=a.data,n=a.width,e=a.height,h=t.percent,o=void 0===h?{}:h,d=new ImageData(n,e),i=0;i<r.length;i+=4){var u=r[i],f=r[i+1],s=r[i+2],c=r[i+3],g=b({r:u,g:f,b:s},o),M=l({},g),m=v(M);d.data[i]=m.r,d.data[i+1]=m.g,d.data[i+2]=m.b,d.data[i+3]=c}return d},r=Object.freeze({gray:function(a){for(var t=a.imageData,r=t.data,n=t.width,e=t.height,h=new ImageData(n,e),o=0;o<r.length;o+=4){var d=(r[o+0]+r[o+1]+r[o+2])/3;h.data[o+0]=d,h.data[o+1]=d,h.data[o+2]=d,h.data[o+3]=255}return h},personSkin:function(a){for(var t=a.imageData,r=t.data,n=t.width,e=t.height,h=new ImageData(n,e),o=0;o<r.length;o+=4){var d=r[4*o],i=r[4*o+1],u=r[4*o+2];15<Math.abs(d-i)&&i<d&&u<d?95<d&&40<i&&20<u&&15<Math.max(d,i,u)-Math.min(d,i,u)?(h.data[4*o]=1,h.data[4*o+1]=1,h.data[4*o+2]=1):220<d&&210<i&&170<u?(h.data[4*o]=1,h.data[4*o+1]=1,h.data[4*o+2]=1):(h.data[4*o]=d,h.data[4*o+1]=i,h.data[4*o+2]=u):(h.data[4*o]=255,h.data[4*o+1]=255,h.data[4*o+2]=255),h.data[4*o+3]=255}return h},transform:function(a){var t=a.imageData,r=a.options;return n(t,void 0===r?{}:r)}});onmessage=function(a){var t=(0,r[a.data.key])(a.data.param);postMessage({key:a.data.key,result:t},void 0)}}();
